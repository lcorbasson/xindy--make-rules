A localization architecture for xindy.
======================================

TeX design:
-----------

This design is meant to fit in with the way 'make-rules'
works. 

The localization files for xindy are found 

 1. in the directory lang/<language>:

  a.    root-tex-<variant>-<encoding>.xdy 
     or root-tex-<variant>.xdy        
     or root-tex-<encoding>.xdy        
     or root-tex.xdy
  b. <variant>-<encoding>.xdy  or  <encoding>.xdy
  c. tex-<encoding>.xdy

 2. in the directory tex/inputenc

  d. <encoding>.xdy

File(s) a. are copied from the example.xdy file 
found in make-rules, editing the (require ...)
statements to point to files b., c. and d.

File(s) b. are generated by the make-rules.pl script.

File(s) d. are generated by the make-inp-rules.pl script.

Both these scripts are generated by running

  make all
  make install

in the appropriate directories. In every language 
directory a correct, manually created 

  <variant>-<encoding>.pl
or
  <encoding>.pl

should be present.

File c. is written manually to contain those character
merge-rules that are needed for (La)TeX, but not 
already produced in d. Such as \AA = ┼, which is not 
automatically generated in tex/inputenc/latin1.xdy, or
any other encoding either.

Also a rule like 

  (merge-rule "{" "" :string)

needed to get off the initial "{" that encloses author
names if you use the \citeindextrue option to put your
reference list into the index.


Example:

-----------------------------------------
public:
  <language> = german
  <variant>  = duden, din5007
private:
  <encoding> = latin1

lang
|-- tex
|   `-- inputenc
|       `-latin1.xdy      <Ф-и-и`иии`
`-- german                      |   :
    |-- root-tex-duden.xdy >----|   :
    |-- duden-latin1.xdy   <----|   :
    |-- duden-latin1.pl         |   :
    |-- root-tex-din5007.xdy ╗ии|иии:
    |-- din5007-latin1.xdy Фииии|иии:
    |-- din5007-latin1.pl       |   :
    `-- tex-latin1.xdy    <Ф-и-и'иии'
-----------------------------------------


Running xindy is done like this:

  xindy lang/<language>/root-tex-<variant>.xdy myindex.raw

and generating the index from a standard LaTeX/makeindex
index is done by

  tex2xindy <myindex.idx >myindex.raw

*before* this.

Finally we need a makeindex-like command able to accept 
the following syntax:

  makeindex4 [[-m <language>] -v <variant>] -t myindex

requiring only the root file

  lang/<language>/root-tex-<variant>.xdy  
or
  lang/<language>/root-tex.xdy

which will require all the others. The easiest way
is just a shell script containing the above commands.
In case no -m and/or -v option is used, the default
is chosen, which will be *english*, i.e. 

  lang/english/root-tex.xdy

In case the -v option is left out, a default variant 
is chosen. If it is not the only variant, a symlink should
be present

  lang/<language>/root-tex.xdy

pointing to

  lang/<language>/root-tex-<variant1>.xdy

The string <language> should be always chosen to be
*compatible with the babel package naming convention*.

The option (without argument) -t means: doc processor is tex.

Other document processors:
--------------------------

Support for other document processors (nroff? lout?)
is provided by the following modifications:

 1. in the directory lang/<language>:

  a. root-<dp>-<variant>.xdy        or  root-<dp>.xdy
  b. <variant>-<encoding>.xdy  or  <encoding>.xdy
  c. <dp>-<encoding>.xdy

 2. in the directory <dp>/inputenc

  d. <encoding>.xdy

... where, obviously, <dp> stands for the document
processor acronym in question.

It is assumed that the files in b. are independent
of the document processor used.

Command syntax:

  makeindex4 [[-m <language>] -v <variant>] -<dp> myindex

where <dp> is a suitable letter, e.g.

  -t tex
  -n nroff
  -l lout
  ...


Style files:
------------

It would be a good idea to put style files into a 
directory 'styles' under 'modules'. The current default
style as defined in the make-rules example file would 
be styles/makeindex.xdy.

Loading the style file would be done from the 
makeindex.sh script independently of the localization
files. The option would be 

  -s <style>

i.e.

  -s makeindex

which is the assumed default.



Martin Vermeer 19.03.2001

